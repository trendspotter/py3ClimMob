{% extends 'dashboard/dashboard.jinja2' %}

{% block title %}
    <title>{{ _("ClimMob | Set question values") }}</title>
{% endblock title %}

{% block css %}
    {% cssresource request,'coreresources','datatables' %}
    {% cssresource request,'coreresources','sweet' %}
{% endblock css %}

{% block topScripts %}
    {% jsresource request,'coreresources','qvalues' %}
    {% jsresource request,'coreresources','sweet' %}
    {% jsresource request,'coreresources','delete' %}
{% endblock topScripts %}

{% block pageheading %}
    <div class="row wrapper border-bottom white-bg page-heading">
        <div class="col-lg-10">
            <h2>{{ _("Question options") }}</h2>
            <ol class="breadcrumb">
                <li>
                    <a href="{{ request.route_url('dashboard') }}">{{ _("Main menu") }}</a>
                </li>
                <li >
                    <a href="{{ request.route_url('qlibrary', user_name=activeUser.login) }}">{{ _("Questions library") }}</a>
                </li>
                <li>
                    <a>{{ _("Question") }}: {{ qdata.question_desc }}</a>
                </li>
                <li class="active">
                    <strong>{{ _("Question options") }}</strong>
                </li>
            </ol>
            <a href="https://climmob.net/blog/wiki/2019/09/30/question-options/" target="_blank"><img style="width: 25px; height: 25px " src="{{ request.url_for_static('static/landing/info.png') }}" alt="info"/> </a>
        </div>
        <div class="col-lg-2">

        </div>
    </div>
{% endblock %}

{% block pagecontent %}
    <div class="row" style="height: 100%">
        <div class="col-lg-12 " style="height: 100%">
            <div class="ibox float-e-margins" style="height: 100%; margin-bottom: 0px">

                <div class="ibox-title">
                    <h5>{{ _("Question options") }}</h5>
                    <div class="ibox-tools">
                        {% if editable %}
                            <button onclick="location.href='{{ request.route_url('addquestionvalue', qid=qid) }}';" type="button" class="btn btn-primary btn-xs pull-right">{{ _("Add new option") }}</button>
                        {% endif %}
                    </div>
                </div>
                <div class="ibox-content" style="height: 89%">

                    <div class="table-responsive">
                        <table class="table table-striped table-bordered table-hover dataTables-example" >
                            <thead>
                            <tr>
                                <th>{{ _("Value") }}</th>
                                <th>{{ _("Description") }}</th>
                                {% if editable %}
                                    <th>{{ _("Actions") }}</th>
                                {% endif %}
                            </tr>
                            </thead>
                            <tbody>
                            {% for option in qoptions %}
                                <tr class="gradeX">
                                    <td class="center">{{ option.value_code }}</td>
                                    <td class="center">{{ option.value_desc }} {% if option.value_isother ==1 %}<span class="label label-other">{{ _("Other") }}</span>{% endif %} {% if option.value_isna ==1 %}<span class="label label-na">{{ _("Not aplicable") }}</span>{% endif %} </td>
                                    {% if editable %}
                                        <td class="center text-center">
                                            <button onclick="location.href='{{ request.route_url('editquestionvalue', qid=qid,valueid=option.value_code) }}';" class="btn btn-warning btn-circle" type="button" title="Edit option"><i class="fa fa-pencil"></i></button>
                                            <button onclick="showDelete('{{ request.route_url('deletequestionvalue', qid=qid,valueid=option.value_code) }}','{{ _("Do you really want to remove this option ?") }}','{{ request.session.get_csrf_token() }}')" class="btn btn-danger btn-circle" type="button" title="Delete option"><i class="fa fa-times"></i></button>
                                        </td>
                                    {% endif %}
                                </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>

            </div>
        </div>
    </div>
{% endblock pagecontent%}