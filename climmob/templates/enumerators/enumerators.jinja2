{% extends 'dashboard/dashboard.jinja2' %}

{% block title %}
    <title>{{ _("ClimMob | Field agents") }}</title>
{% endblock title %}

{% block css %}
    {% cssresource request,'coreresources','sweet' %}
{% endblock css %}

{% block topScripts %}
    {% jsresource request,'coreresources','sweet' %}
    {% jsresource request,'coreresources','delete' %}
{% endblock topScripts %}

{% block pageheading %}
    <div class="row wrapper border-bottom white-bg page-heading">
        <div class="col-lg-10">
            <h2>{{ _("Field agents") }}</h2>
            <ol class="breadcrumb">
                <li>
                    <a href="{{ request.route_url('dashboard') }}">{{ _("Main menu") }}</a>
                </li>
                <li class="active">
                    <strong>{{ _("Field agents") }}</strong>
                </li>
            </ol>
            <a href="https://climmob.net/blog/wiki/2019/09/30/field-agents/" target="_blank"><img style="width: 25px; height: 25px " src="{{ request.url_for_static('static/landing/info.png') }}" alt="info"/> </a>
        </div>
        <div class="col-lg-2">

        </div>
    </div>
{% endblock %}


{% block pagecontent %}
    <div class="row">
        <div class="col-lg-12 ">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <div class="ibox-tools">
                        <a href="{{ request.route_url('addenumerator') }}"  class="btn btn-xs btn-primary pull-right clm-grpactions" style="margin-right: 20px">{{ _("Add new field agent") }}</a>
                    </div>
                </div>
                <div class="ibox-content" >
                    {% if searchEnumerator %}
                        <table class="table table-striped table-bordered">
                            <tbody>
                            <tr>
                                <th class="text-center">{{ _('User name') }}</th>
                                <th class="text-center">{{ _('Name') }}</th>
                                <th class="text-center">{{ _('Password') }}</th>
                                <th class="text-center">{{ _('Status') }}</th>
                                <th class="text-center"></th>
                            </tr>

                            {% for enumerator in searchEnumerator %}
                                <tr>
                                    <td> {{ enumerator.enum_id }}</td>
                                    <td> {{ enumerator.enum_name }}</td>
                                    <td> {{ enumerator.enum_password }}</td>
                                    <td >

                                        {% if enumerator.enum_active == 1 %}
                                            <a class="btn btn-success btn-rounded btn-block btn-xs pull-left" href="#"><i class="fa fa-thumbs-o-up"></i> {{ _('Can submit data') }}</a>
                                        {% else %}
                                            <a class="btn btn-danger btn-rounded btn-block btn-xs pull-left" href="#"><i class="fa fa-thumbs-o-down"></i> {{ _('Cannot submit data') }}</a>
                                        {% endif %}

                                    </td>
                                    <td class="text-center">
                                        <a class="btn btn-warning btn-circle" href="{{request.route_url('modifyenumerator',enumeratorid = enumerator.enum_id)}}"  title="Edit field agent"><i class="fa fa-pencil"></i></a>
{#                                        <button class="btn btn-danger btn-circle" onclick="showDeleteEnumerator('{{request.route_url('deleteenumerator',enumeratorid = enumerator.enum_id)}}','Remove field agent','Remove');" type="button" title="Remove field agent"><i class="fa fa-times"></i></button>#}
                                        <button class="btn btn-danger btn-circle" onclick="showDelete('{{ request.route_url('deleteenumerator',enumeratorid = enumerator.enum_id)}}','{{ _("Do you really want to remove this field agent ?") }}','{{ request.session.get_csrf_token() }}')" type="button" title="Remove field agent"><i class="fa fa-times"></i></button>
                                    </td>
                                </tr>
                            {% endfor %}

                            </tbody>
                        </table>
                    {% else %}
                        <div style="width: 100%; text-align: center">
                            <h3><b>{{ _("No field agents to display") }}</b></h3>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

{% endblock pagecontent %}

